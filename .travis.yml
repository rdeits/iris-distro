language: python

notifications:
  email: false

branches:
  only:
    - master

matrix:
  include:
    - os: linux
      sudo: required
      dist: trusty
      python: "2.7"
      env:
        - IRIS_BUILD=bazel
    - os: linux
      sudo: required
      dist: trusty
      python: "2.7"
      env:
        - IRIS_BUILD=cmake
        - PYBIND11_PYTHON_VERSION=2.7
    - os: linux
      sudo: required
      dist: trusty
      python: "3.5"
      env:
        - IRIS_BUILD=cmake
        - PYBIND11_PYTHON_VERSION=3.5
    - os: osx
      language: generic
      env:
        - IRIS_BUILD=bazel
    - os: osx
      language: generic
      env:
        - IRIS_BUILD=cmake

addons:
  apt:
    sources:
      - sourceline: "deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8"
        key_url: https://bazel.build/bazel-release.pub.gpg
    packages:
      - bazel

install:
  - source travis/$TRAVIS_OS_NAME.sh
  - source travis/common.sh

script:
  - source travis/$IRIS_BUILD.sh
